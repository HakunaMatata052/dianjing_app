(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b23ec430"],{"0e4c":function(t,e,a){var i=a("e1f9");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("6a1a59c5",i,!0,{})},4114:function(t,e,a){var i=a("eb75");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("1485aae2",i,!0,{})},5395:function(t,e,a){"use strict";a.r(e);a("c5f6");var i=a("ff6f"),o=a("2ae6"),n=(i["a"],o["a"],{name:"setting",components:{navBar:i["a"],uploadAvatar:o["a"]},computed:{dateTime:{get:function(){return"birthday"==this.activePopup.field?new Date(this.activePopup.value):new Date},set:function(t){this.$store.state.userInfo.birthday=t}}},data:function(){return{top:0,popupShow:!1,pickerPopupShow:!1,activePopup:{title:"",field:"",value:""},sexList:[{text:"男",value:1},{text:"女",value:0}]}},created:function(){var t=this.$store.state.systemType;"android"==t&&(this.top=25),"ios"==t&&(this.top=40,this.searchEmptyShow=!0)},methods:{editPopup:function(t,e){this.popupShow=!0,this.activePopup.title=t,this.activePopup.field=e,this.activePopup.value=this.$store.state.userInfo[this.activePopup.field]},editPickerPopup:function(t,e){this.pickerPopupShow=!0,this.activePopup.title=t,this.activePopup.field=e,this.activePopup.value=this.$store.state.userInfo[this.activePopup.field]},editAvatar:function(){this.$refs.upload.openLoadPopup()},confirmEdit:function(){var t=this;if("nickname"==this.activePopup.field&&this.activePopup.value.length>6)this.$toast.fail("昵称不能超过6字");else{if("weight"==this.activePopup.field){if(this.activePopup.value>=300)return void this.$toast.fail("人不可能这么胖");if(this.activePopup.value<30)return void this.$toast.fail("人不可能这么瘦")}if("height"==this.activePopup.field){if(this.activePopup.value>=250)return void this.$toast.fail("人不可能这么高");if(this.activePopup.value<20)return void this.$toast.fail("人不可能这么矮")}"signname"==this.activePopup.field&&this.activePopup.value.length>=20?this.$toast.fail("个性签名不能超过20字"):t.updateUseInfo(function(){t.$METHOD.updateLocalUserInfo(t.activePopup.field,t.activePopup.value)})}},pickerOnConfirm:function(t){var e=this;e.activePopup.value=t.value||Number(t.getTime()),e.updateUseInfo(function(){e.$METHOD.updateLocalUserInfo(e.activePopup.field,t.value||Number(t.getTime()))})},uploadSuccess:function(t){var e=this;e.activePopup.field="image",e.activePopup.value=t,e.updateUseInfo(function(){e.$METHOD.updateLocalUserInfo(e.activePopup.field,e.activePopup.value)})},updateUseInfo:function(t){var e=this,a={};a[e.activePopup.field]=e.activePopup.value,a.userid=e.$store.state.userInfo.userid,e.$SERVER.updateUseInfo(a).then(function(a){t(),e.$toast.success(a.data),e.popupShow=!1,e.pickerPopupShow=!1})},logout:function(){this.$METHOD.removeStore("token"),this.$METHOD.removeStore("userInfo"),this.$METHOD.removeStore("rongyunToken"),this.$store.state.userInfo={userid:""},this.$toast.success("退出成功！"),this.$router.push("/login")}}}),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{id:"setting"}},[a("navBar"),t._v(" "),a("div",{staticClass:"main"},[a("van-cell-group",{staticClass:"cell-group"},[a("van-cell",{attrs:{title:"设置头像",size:"large","is-link":""},on:{click:function(e){t.editAvatar("设置头像","nickname")}}},[a("template",{slot:"default"},[a("van-image",{staticClass:"avatar",attrs:{fit:"cover",src:t.$store.state.userInfo.image||(0==t.$store.state.userInfo.sex?"img/avatar-w.png":"img/avatar-m.png")}})],1)],2),t._v(" "),a("van-cell",{attrs:{title:"设置昵称",size:"large","is-link":"",value:t.$store.state.userInfo.nickname||""},on:{click:function(e){t.editPopup("设置昵称","nickname")}}}),t._v(" "),a("van-cell",{attrs:{title:"设置身高",size:"large","is-link":"",value:(t.$store.state.userInfo.height||"")+"cm"},on:{click:function(e){t.editPopup("设置身高","height")}}}),t._v(" "),a("van-cell",{attrs:{title:"设置体重",size:"large","is-link":"",value:(t.$store.state.userInfo.weight||"")+"Kg"},on:{click:function(e){t.editPopup("设置体重","weight")}}}),t._v(" "),a("van-cell",{attrs:{title:"设置性别",size:"large","is-link":"",value:1==t.$store.state.userInfo.sex?"男":"女"},on:{click:function(e){t.editPickerPopup("设置性别","sex")}}}),t._v(" "),a("van-cell",{attrs:{title:"设置生日",size:"large","is-link":"",value:t.$METHOD.format(t.$store.state.userInfo.birthday,"yyyy-MM-dd")},on:{click:function(e){t.editPickerPopup("设置生日","birthday")}}}),t._v(" "),a("van-cell",{attrs:{title:"修改个性签名",size:"large","is-link":"",label:t.$store.state.userInfo.signname||""},on:{click:function(e){t.editPopup("修改个性签名","signname")}}})],1),t._v(" "),a("van-cell-group",{staticClass:"cell-group"},[a("van-cell",{attrs:{title:"退出登录",size:"large","is-link":""},on:{click:t.logout}})],1)],1),t._v(" "),a("van-popup",{style:{height:"100%"},attrs:{type:"primary",position:"bottom","get-container":"body"},model:{value:t.popupShow,callback:function(e){t.popupShow=e},expression:"popupShow"}},[a("div",{style:"height:"+t.top+"px"}),t._v(" "),a("van-nav-bar",{attrs:{title:t.activePopup.title,"left-text":"取消"},on:{"click-left":function(e){t.popupShow=!1},"click-right":t.confirmEdit}},[a("van-button",{attrs:{slot:"right",type:"primary",size:"small"},slot:"right"},[t._v("确定")])],1),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{placeholder:t.activePopup.value||"请输入个性签名",autosize:"",type:"signname"==t.activePopup.field?"textarea":"input"},model:{value:t.activePopup.value,callback:function(e){t.$set(t.activePopup,"value",e)},expression:"activePopup.value"}})],1)],1),t._v(" "),a("van-popup",{attrs:{position:"bottom","get-container":"body"},model:{value:t.pickerPopupShow,callback:function(e){t.pickerPopupShow=e},expression:"pickerPopupShow"}},["birthday"==t.activePopup.field?a("van-datetime-picker",{attrs:{type:"date","min-date":new Date(1900,10,1),"max-date":new Date},on:{cancel:function(e){t.pickerPopupShow=!1},confirm:t.pickerOnConfirm},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}}):t._e(),t._v(" "),"sex"==t.activePopup.field?a("van-picker",{attrs:{columns:t.sexList,"show-toolbar":""},on:{cancel:function(e){t.pickerPopupShow=!1},confirm:t.pickerOnConfirm}}):t._e()],1),t._v(" "),a("uploadAvatar",{ref:"upload",attrs:{appearance:"circular",mode:"image"},on:{uploadSuccess:t.uploadSuccess}})],1)},r=[],l=a("2455");function c(t){a("0e4c")}var p=!1,u=c,v="data-v-02d8b080",f=null,d=Object(l["a"])(n,s,r,p,u,v,f);e["default"]=d.exports},b00e:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"\n.nobg .van-hairline--bottom::after {\n  border-bottom-width: 0;\n}\n",""])},e1f9:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"\n.cell-group[data-v-02d8b080] {\n  margin-top: 0.2rem;\n}\n.avatar[data-v-02d8b080] {\n  width: 0.6rem;\n  height: 0.6rem;\n  border-radius: 50%;\n  overflow: hidden;\n}\n",""])},eb75:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"\n.navbar[data-v-7aa0d3c6] {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  z-index: 999;\n  background: #fff;\n}\n.navbar .title span[data-v-7aa0d3c6] {\n  font-weight: bold;\n}\n.navbar .left[data-v-7aa0d3c6],\n.navbar .right[data-v-7aa0d3c6] {\n  font-size: 0.4rem;\n}\n.navbar-empty[data-v-7aa0d3c6] {\n  height: 0.92rem;\n}\n/* 风格 */\n.nobg[data-v-7aa0d3c6] {\n  background: none;\n}\n.nobg .title[data-v-7aa0d3c6] {\n  color: #fff;\n}\n.nobg .left[data-v-7aa0d3c6] {\n  color: #fff !important;\n}\n",""])},f2d0:function(t,e,a){var i=a("b00e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("0274895e",i,!0,{})},ff6f:function(t,e,a){"use strict";a("386d"),String,Boolean,Boolean,Boolean,String;var i={name:"navbar",data:function(){return{top:"",searchShow:!1,value:"",searchEmptyShow:!1}},props:{title:{type:String,default:function(){return this.$route.meta.title},required:!1},goback:{type:Boolean,default:function(){return!0},required:!1},search:{type:Boolean,default:function(){return!1},required:!1},filter:{type:Boolean,default:function(){return!1},required:!1},stl:{type:String,default:function(){},required:!1}},components:{},mounted:function(){var t=this.$store.state.systemType;"android"==t&&(this.top=25),"ios"==t&&(this.top=40,this.searchEmptyShow=!0)},methods:{onClickLeft:function(){this.goback&&this.$router.go(-1)},openSearchFn:function(){this.search&&(this.searchShow=!0)},searchFn:function(){console.log("搜索")}}},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative"}},[a("div",{staticClass:"navbar",class:t.stl?t.stl:"",attrs:{id:"navbar"}},[a("div",{staticClass:"top",style:"padding-top:"+t.top+"px"}),t._v(" "),a("van-nav-bar",{staticStyle:{background:"none"},attrs:{"z-index":999},on:{"click-left":function(e){t.onClickLeft()},"click-right":function(e){t.openSearchFn()}}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("span",[t._v(t._s(t.title))]),t._v(" "),t._t("title")],2),t._v(" "),t.goback?a("van-icon",{staticClass:"left",attrs:{slot:"left",name:"arrow-left"},slot:"left"}):t._e(),t._v(" "),t.search?a("svg-icon",{staticClass:"right",attrs:{slot:"right","icon-class":"search"},slot:"right"}):t._t("right",null,{slot:"right"})],2)],1),t._v(" "),t.stl?t._e():a("div",{staticClass:"navbar-empty",style:"padding-top:"+t.top+"px"}),t._v(" "),a("van-popup",{attrs:{position:"top","get-container":"body"},model:{value:t.searchShow,callback:function(e){t.searchShow=e},expression:"searchShow"}},[t.searchEmptyShow&&!t.stl?a("div",{staticClass:"navbar-empty"}):t._e(),t._v(" "),a("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{blur:t.searchFn},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1)},n=[],s=a("2455");function r(t){a("f2d0"),a("4114")}var l=!1,c=r,p="data-v-7aa0d3c6",u=null,v=Object(s["a"])(i,o,n,l,c,p,u);e["a"]=v.exports}}]);